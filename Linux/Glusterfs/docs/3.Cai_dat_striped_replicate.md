# CÀI ĐẶT STRIP - REPLICATED VOLUME 
## 1. Cài đặt replicated volume :  
- Mô hình :  
<img src="../img/glusterfs_replicate.png">  

- Cài đặt :  
  - Tạo parition :  
```
fdisk /dev/sdb
```  
  - Format partition :  
```
mkfs.ext4 /dev/sdb1
```  
  - Mount partition vào đường dẫn tại mnt (tạo thư mục mới nếu chưa có )
```
mkdir -p /mnt/brick1
mount /dev/sdb1 /mnt/brick1
```  
 - Có thể sửa file /etc/fstab để khi reset server ta không phải mount lại thư mục:  
```
echo "/dev/sdb1 /mnt/brick1 ext4 defaults 0 0" >> /etc/fstab
```
- Từ server 192.168.30.55 add node (server 192.168.30.136) vào pool bằng lệnh :  
```
glusterfs peer probe 192.168.30.136
```

<img src="../img/3_3.png">
  
- Ta có thể kiểm tra bằng lệnh :  
```
gluster peer status
```
<img src="../img/3_4.png">

### **Tạo volume**  
- Tạo volume để client có thể mount đến bằng lệnh :  
```
gluster volume create replicate_volume rep 2 192.168.30.55:/mnt/replicated 192.168.30.136:/mnt/replicated force
```  
<img src="../img/1_1.png">  

- Sau khi tạo thành công cần start volume lên :  
```
gluster volume start volume_demo
```    
<img src="../img/1_3.png">  
 

- Kiểm tra bằng lệnh :  
```
gluster volume info
```
<img src="../img/1_2.png">  
   

- Bên server mount lại và sử dụng :  
     Mount volume được tạo từ server :  
```
mount.glusterfs 192.168.30.55:/replicate_volume /mnt/replicated
```  
<img src="../img/1_4.png">  

